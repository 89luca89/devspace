body .menu {
  margin: 0;
  padding: 0;
  scrollbar-gutter: stable;
  border-right: 1px solid #fff;
  position: relative;

  /* Add border on the right-hand side */
  &::after {
    content: " ";
    width: 1px;
    height: 100%;
    min-height: calc(100vh - 60px - 90px);
    position: absolute;
    top: 0;
    right: 0;
    background: rgb(218, 221, 225);
  }

  /* Add scrollbar (appears only if many sections expanded) */
  &::-webkit-scrollbar,
  &::-webkit-scrollbar-thumb,
  &::-webkit-scrollbar-track {
    transition: all 0.3s !important;
    border-radius: 0 !important;
  }

  /* Hide scrollbar (if menu is not hovered) */
  &:not(:hover)::-webkit-scrollbar,
  &:not(:hover)::-webkit-scrollbar-thumb,
  &:not(:hover)::-webkit-scrollbar-track {
    background-color: #fff !important;
  }

  .code-style {
    font-family: Menlo, 'Courier New', monospace;
  }

  .menu__list {
    &, .menu__list-item {
      margin: 0;
      padding: 0;
    }

    /* 1st level links */
    .menu__link {
      padding: 0.8rem 1.8rem;
      font-weight: 600;
      outline: none;
      border-radius: 0;
    }
  
    .menu__list {
      /* 2nd level links */
      .menu__link {
        padding: 0.5rem 1.2rem 0.5rem 2.8rem;
        font-weight: 400;
        transition: 0.3s;
      }
  
      .menu__list {
        &:not(.menu__link--active){
          &:not(:hover) {
            opacity: 0.85;
          }
        }
  
        /* 4rd level links */
        .menu__link {
          padding: 0.3rem 1.2rem 0.3rem 4.3rem !important;
          font-size: 0.9em;
          
          &:not(:hover) {
            opacity: 0.65;
          }
        }
      }
    }
  }
}

.menu > .menu__list > .menu__list-item:nth-last-child(1) {
  margin-top: 1.5em;
  padding-top: 1.5em;
  border-top: 1px solid #e9e9e9;
}

.menu__list-item > .menu__list .menu__list-item {
  margin: 0 !important;
  padding: 0 0 0.2em 0.8em;
}

.menu__list-item > .menu__list .menu__link {
  position: relative;
  margin: 0 !important;
  padding: 0.1em 0 0.1em 0.2em;
  background: transparent;
}

.theme-doc-sidebar-item-category.menu__list-item--collapsed,
.theme-doc-sidebar-item-category.menu__list-item--collapsed .menu__link {
  background: transparent !important;
}

.theme-doc-sidebar-menu > .theme-doc-sidebar-item-category > .menu__list-item-collapsible {
  background: transparent !important;
}

.theme-doc-sidebar-menu > .theme-doc-sidebar-item-category,
.theme-doc-sidebar-menu > .theme-doc-sidebar-item-category > .menu__link,
.theme-doc-sidebar-menu > .menu__list-item > .menu__link--active {
  background-color: rgb(195 207 211 / 16%);
}

.theme-doc-sidebar-menu > .theme-doc-sidebar-item-category:hover,
.menu__list .menu__link:not([href="#"]):hover {
  background-color: rgb(195 207 211 / 16%) !important;
}

.menu__list-item-collapsible {
  display: block;
}

/* Collapse/Expand icon */
.menu__caret {
  background-color: transparent !important;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  padding-right: 20px;
  align-items: center;
  
  &::before {
    margin-right: 0;
    margin-left: auto;
  }

  .menu__list-item-collapsible:not(.menu__list-item-collapsible--active) & {
    z-index: -1;
  }
}

/* Blue dot indicator */
.menu__list .menu__link {
  &::before {
    content: "";
    right: 100%;
    margin-right: -1.2rem;
    top: 50%;
    margin-top: -4px;
    height: 8px;
    position: absolute;
    width: 8px;
    border-radius: 4px;
    background-color: var(--ifm-color-info);
    transform: scale(0);
    transition: .4s cubic-bezier(.4,0,.2,1);
  }

  /* Show dot on hover and for active links */
  &:hover::before,
  &[aria-current="page"]::before {
    transform: scale(1);
  }

  /* Turn dot into line for active link */
  &[aria-current="page"]::before {
    width: 2em;
  }
}

.theme-doc-sidebar-item-category:not(.menu__list-item--collapsed) > .menu__list {
  padding-bottom: 0.4rem !important;
}

.menu .menu__link--sublist {
  color: var(--ifm-menu-color) !important;
}

/* Add line between two expanded sections (transparent) */
.theme-doc-sidebar-menu > .theme-doc-sidebar-item-category {
  border-top: 0.5px solid transparent;
}

/* Add line between two expanded sections (grey once expanded) */
.theme-doc-sidebar-item-category:not(.menu__list-item--collapsed) + .theme-doc-sidebar-item-category:not(.menu__list-item--collapsed) {
  border-top-color: rgba(0, 0, 0, 0.1);
}
