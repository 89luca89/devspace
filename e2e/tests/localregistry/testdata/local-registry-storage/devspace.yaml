version: v2beta1
name: local-registry
images:
  app:
    image: my-docker-username/helloworld
    tags:
      - latest
    rebuildStrategy: default
    localRegistry:
      persistence:
        enabled: true
        size: 5Gi
deployments:
  app:
    kubectl:
      manifests:
        - manifests/deployment.yaml
dev:
  app:
    labelSelector:
      app.kubernetes.io/component: app
    container: container1
vars:
  DEVSPACE_ENV_FILE:
    value: .env
    alwaysResolve: false
hooks:
  - command: |
      echo -n ${runtime.images.app} > app.out
    events: ["after:build"]
  - command: |
      echo -n ${runtime.images.app.image} > app_image.out
    events: ["after:build"]
