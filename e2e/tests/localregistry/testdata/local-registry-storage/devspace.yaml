version: v2beta1
name: local-registry
localRegistry:
  name: registry-storage
  persistence:
    enabled: true
    size: 5Gi
images:
  app:
    image: my-docker-username/helloworld
    tags:
      - latest
    rebuildStrategy: default
deployments:
  app:
    kubectl:
      manifests:
        - manifests/deployment.yaml
dev:
  app:
    labelSelector:
      app.kubernetes.io/component: app
    container: container1
vars:
  DEVSPACE_ENV_FILE:
    value: .env
    alwaysResolve: false
hooks:
  - command: |
      echo -n ${runtime.images.app} > app.out
    events: ["after:build"]
  - command: |
      echo -n ${runtime.images.app.image} > app_image.out
    events: ["after:build"]
